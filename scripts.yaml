sonos_doorbell:
  alias: Sonos doorbell
  sequence:
  - service: sonos.snapshot
    entity_id: media_player.kok_2
  - service: media_player.volume_set
    entity_id: media_player.kok_2
    data:
      volume_level: 0.6
  - service: media_player.play_media
    entity_id: media_player.kok_2
    data:
      media_content_id: https://runevad.synology.me:8123/local/doorbell.mp3
      media_content_type: music
  - delay: 00:00:15
  - service: sonos.restore
    entity_id: media_player.kok_2
sonos_fire_alarm:
  alias: Sonos fire alarm
  sequence:
  - service: sonos.snapshot
    entity_id: media_player.kok_2
  - service: media_player.volume_set
    entity_id: media_player.kok_2
    data:
      volume_level: 0.8
  - service: media_player.play_media
    entity_id: media_player.kok_2
    data:
      media_content_id: https://runevad.synology.me:8123/local/fire_alarm.mp3
      media_content_type: music
  - delay: 00:00:40
  - service: sonos.restore
    entity_id: media_player.kok_2
sonos_alarm:
  alias: Sonos alarm
  sequence:
  - service: sonos.snapshot
    entity_id: media_player.kok_2
  - service: media_player.volume_set
    entity_id: media_player.kok_2
    data:
      volume_level: 0.8
  - service: media_player.play_media
    entity_id: media_player.kok_2
    data:
      media_content_id: https://runevad.synology.me:8123/local/alarm.mp3
      media_content_type: music
  - delay: 00:03:00
  - service: sonos.restore
    entity_id: media_player.kok_2
cottage_home:
  alias: Cottage Home
  sequence:
  - service: input_select.select_option
    data:
      entity_id: input_select.cottage_status
      option: Home
  - service: switch.turn_on
    data:
      entity_id: switch.storage_hwc
cottage_away:
  alias: Cottage Away
  sequence:
  - data:
      entity_id: input_select.cottage_status
      option: Away
    service: input_select.select_option
  - data:
      entity_id: switch.storage_hwc
    service: switch.turn_off
  - data:
      entity_id: group.bedroom_lights
    service: light.turn_off
  - service: media_player.turn_off
cottage_standby:
  alias: Cottage Standby
  sequence:
  - service: input_select.select_option
    data:
      entity_id: input_select.cottage_status
      option: Standby
  - service: switch.turn_off
    data:
      entity_id: switch.storage_hwc
cottage_night:
  alias: Cottage Night
  sequence:
  - data:
      entity_id: input_select.cottage_status
      option: Night
    service: input_select.select_option
  - data:
      entity_id:
      - switch.storage_hwc
      - switch.extra_hot_water
    service: switch.turn_off
  - data:
      entity_id:
      - group.bedroom_lights
      - group.window_lights
      - group.window_lights_bedroom
      - light.outdoor_porch_lights
    service: light.turn_off
  - data:
      brightness: 1
      entity_id: group.carport_lights
    service: light.turn_on
extra_hot_water:
  alias: Extra varmvatten 2h
  sequence:
  - service: switch.turn_on
    data:
      entity_id: switch.extra_hot_water
  - delay: 02:00:00
  - service: switch.turn_off
    data:
      entity_id: switch.extra_hot_water
car_heater:
  alias: Manuell motorvärmarstart 2h
  sequence:
  - service: switch.turn_on
    data:
      entity_id: switch.carport_car_heater
  - delay: 02:30:00
  - service: switch.turn_off
    data:
      entity_id: switch.carport_car_heater
sonos_say:
  alias: Sonos TTS script
  sequence:
  - service: sonos.snapshot
    data_template:
      entity_id: '{{ sonos_entity|default(''media_player.kok_2'') }}'
  - service: sonos.unjoin
    data_template:
      entity_id: '{{ sonos_entity|default(''media_player.kok_2'') }}'
  - service: media_player.volume_set
    data_template:
      entity_id: '{{ sonos_entity|default(''media_player.kok_2'') }}'
      volume_level: '{{ volume|default(0.4) }}'
  - service: tts.google_say
    data_template:
      entity_id: '{{ sonos_entity|default(''media_player.kok_2'') }}'
      message: '{{ message }}'
  - delay: '{{ delay|default(''00:00:00'') }}'
  - wait_template: '{{ is_state(sonos_entity|default(''media_player.kok_2''), ''playing'')
      }}'
    timeout: 00:00:10
  - service: sonos.restore
    data_template:
      entity_id: '{{ sonos_entity|default(''media_player.kok_2'') }}'
dishwasher_done:
  alias: Diskmaskinen klar
  sequence:
  - condition: time
    after: 08:00:00
    before: '21:00:00'
  - service: notify.mobile_app_lars_iphone
    data:
      title: Diskmaskinen klar!
      message: '...'
      data:
        push:
          badge:
          category: notis
  - service: script.sonos_say
    data_template:
      sonos_entity: media_player.kok_2
      volume: 0.55
      delay: 00:00:15
      message: Hej Hej Hej, diskmaskinen har körts klart och är redo för utplockning
