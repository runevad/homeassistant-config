homeassistant:
  name: Slätberget
  latitude: !secret latitude_home
  longitude: !secret longitude_home
  elevation: !secret elevation
  unit_system: metric
  time_zone: Europe/Stockholm

  #Customize
  customize: !include_dir_merge_named customize
  customize_domain:
    automation:
      initial_state: 'on'
  #Packages
  packages: !include_dir_named packages

zone:
  name: 'Home'
  latitude: !secret latitude_home
  longitude: !secret longitude_home
  elevation: 136
  radius: 100

zone 2:
  name: 'FEV'
  latitude: !secret latitude_l_work
  longitude: !secret longitude_l_work
  radius: 700

map:

http:
  ssl_certificate: !secret ssl_certificate
  ssl_key: !secret ssl_key
  base_url: !secret base_url
  trusted_networks:
    - 127.0.0.1
    - 192.168.1.0/24
    - 192.168.100.0/24
  ip_ban_enabled: True
  login_attempts_threshold: 5

frontend:

person:

config:

updater:
  include_used_components: True
# Checks for available updates
# Note: This component will send some information about your system to
# the developers to assist with development of Home Assistant.
# For more information, please see:
# https://home-assistant.io/blog/2016/10/25/explaining-the-updater/

cloud:

conversation:

tts:
  - platform: google
    language: 'sv'
    time_memory: 21600

recorder:
  db_url: !secret recorder_db_url
  purge_keep_days: 50
  purge_interval: 5
  include:
    domains:
      - sensor
      - light
      - switch
      - device_tracker
      - person
  exclude:
    domains:
      - script
      - weblink
      - updater
    entities:
      - sun.sun
      - sensor.date
      - sensor.date_time
      - sensor.time
      - sensor.time_utc
      - sensor.last_boot
      - group.door_sensors
      - group.door_units
      - group.motion_sensors
      - group.motion_units
      - group.lars
      - group.emelie

logbook:
  exclude:
    domains:
      - device_tracker

history:

influxdb:
  host: 192.168.1.4
  port: 8086
  database: hass
  username: !secret influx_username
  password: !secret influx_password
  max_retries: 3
  default_measurement: state
  include:
    domains:
      - sensor
      - light
      - switch
      - device_tracker
  exclude:
    entities:
      - sun.sun
      - sensor.date
      - sensor.date_time
      - sensor.time
      - sensor.time_utc
      - sensor.last_boot
  tags:
    source: hass

system_health:

vera:
  vera_controller_url: http://192.168.1.5:3480/
  exclude: [116]
  lights: [81, 62, 61, 60, 115, 136]

neato:
  username: !secret neato_username
  password: !secret neato_password

nibe:
    systems:
        - system: '31372'
          units:
            - unit: 0
              categories: True
              statuses: True
          climates: True
          water_heaters: True

sun:

utility_meter:
  daily_energy:
    source: sensor.energy_month
    cycle: daily
  monthly_energy:
    source: sensor.energy_month
    cycle: monthly
  monthly_car_heater_energy:
    source: sensor.energy_car_heater
    cycle: monthly

camera:
  - platform: mjpeg
    name: front
    still_image_url: !secret front_camera_still_url
    mjpeg_url: !secret front_camera_url
    username: !secret camera_username
    password: !secret camera_password
    verify_ssl: False
  - platform: mjpeg
    name: indoor
    still_image_url: !secret indoor_camera_still_url
    mjpeg_url: !secret indoor_camera_url
    username: !secret camera_username
    password: !secret camera_password
    verify_ssl: False

ios:
  push:
    categories:
      - name: Alarm
        identifier: 'alarm'
        actions:
          - identifier: 'SOUND_ALARM'
            title: 'Starta larmet!!'
            activationMode: 'background'
            authenticationRequired: no
            destructive: yes
            behavior: 'default'
          - identifier: 'SILENCE_ALARM'
            title: 'Tysta larmet'
            activationMode: 'background'
            authenticationRequired: no
            destructive: no
            behavior: 'default'
      - name: Notification
        identifier: 'notis'
        actions:

device_tracker:
  - platform: unifi
    host: 192.168.1.2
    username: !secret unifi_username
    password: !secret unifi_password
    verify_ssl: False
    ssid_filter:
      - 'RunevadHome'
      - 'RunevadGuest'
    monitored_conditions:
      - ip
      - radio
      - _is_guest_by_uap
      - _last_seen_by_uap
      - _uptime_by_uap
    consider_home: 300
    new_device_defaults:
      track_new_devices: False
      hide_if_away: False
  - platform: bluetooth_tracker

owntracks:
  max_gps_accuracy: 300

shell_command:
  restart_hass: 'curl http://127.0.0.1:8126/container/homeassistant/restart'

group: !include_dir_merge_named group

automation: !include automations.yaml

script: !include scripts.yaml

sensor: !include sensor.yaml

switch: !include switch.yaml

binary_sensor: !include binary_sensor.yaml

input_select:
  cottage_status:
      name: 'Cottage status'
      options:
       - Home
       - Away
       - Night
       - Standby
      initial: Standby
      icon: mdi:security

input_number:
  heater_delay:
    name: "Time to overrun"
    icon: mdi:timer
    initial: 30
    min: 0
    max: 60
    step: 5
    unit_of_measurement: min

input_boolean:
  workdays_only:
    name: Only active on workdays
    initial: True
  # lars_pickup:
  #   name: 'Lars lämna på förskolan'
  #   initial: 'on'
  #   icon: mdi:bus-school
  cottage_update:
    name: 'Auto'
    initial: 'on'
    icon: mdi:security
  cottage_guest_mode:
    name: 'Gästläge'
    initial: 'off'
    icon: mdi:security
  trigger_first_morning:
    name: 'Waiting for first morning motion'
    icon: mdi:kettle

input_datetime:
  heater_departuretime:
    name: "Departure time"
    has_date: False
    has_time: True
    initial: '07:00'
